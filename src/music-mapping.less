.EP_Educandu_Example_Display {
  width: 100%;
}

.EP_Educandu_Example_Display-time {
  font-style: italic;
  margin-top: @edu-page-content-padding;
}

.EP_Educandu_Example_Editor {
}

.ItemPanel {
  margin: 10px 0 !important;

  .ant-collapse-header {
    align-items: center !important;
    background-color: @edu-background-color-light !important;
    border-top-left-radius: @edu-border-radius-base !important;
    border-top-right-radius: @edu-border-radius-base !important;
  }

  &.is-dragged {
    border: 1px solid @edu-border-color-dark;
  }

  &.is-other-dragged {
    opacity: 0.6 !important;
  }
}

.ItemPanel-header {
  .m-line-clamp(1);
}

.ItemPanel-contentWrapper {
  background-color: @edu-white !important;
}

.ItemPanel-actionButtons {
  display: grid;
  gap: 3px;
  grid-auto-flow: column;
}

.MusicMapping-loaded-card {
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);

  .MusicMapping-clickArea {
    background-color: #ade488;
  }
}

.MusicMapping-clickArea {
  width: 40px;
  flex-shrink: 0;
  cursor: pointer;
  background-color: #e8e8e8;
  border-radius: 0;
  transition: background-color 0.15s ease;

  &:hover {
    background-color: #ade488;
  }
}

.MusicMapping-card-content {
  position: relative;
}

.MusicMapping-card-mediaWrapper {
  position: relative;
}

.MusicMapping-card-enlargeBtn {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 4px;
  background-color: rgba(0, 0, 0, 0.45);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
  z-index: 5;
  transition: background-color 0.15s ease;

  &:hover {
    background-color: rgba(0, 0, 0, 0.7);
  }
}

.MusicMapping-card-infoBtn {
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 4px;
  background-color: rgba(0, 0, 0, 0.45);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
  z-index: 5;
  transition: background-color 0.15s ease;

  &:hover {
    background-color: rgba(0, 0, 0, 0.7);
  }
}

.MusicMapping-card-copyrightPopover {
  max-width: 300px;
  font-size: 0.85rem;
}

.MusicMapping-previewModal {
  max-width: 90vw;

  .ant-modal-body {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  &--video .ant-modal-body {
    height: 80vh;

    .MediaPlayer {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .MediaPlayer-screen {
      flex: 1;
      min-height: 0;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }
}

.MusicMapping-previewModal-image {
  max-width: 85vw;
  max-height: 85vh;
  object-fit: contain;
}

.MusicMapping-card {
  position: relative;
  border-radius: 8px;
}

// Questions: click area on right, remove right inner corners
.MusicMapping-card--question {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

// Answers: click area on left, remove left inner corners
.MusicMapping-card--answer {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.MusicMapping-card-mediaPreview {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  margin: 0 auto;
  border-radius: 8px;
  background-color: @edu-background-color-light;
  font-size: 1rem;
  font-weight: 600;
  color: @edu-text-color;
}

.MusicMapping-card-controls {
  // Default: visible and in normal flow (for touch devices)
}


@media (hover: hover) {
  .MusicMapping-card-enlargeBtn,
  .MusicMapping-card-infoBtn {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.15s ease, visibility 0.15s ease, background-color 0.15s ease;
  }

  .MusicMapping-card-mediaWrapper:hover .MusicMapping-card-enlargeBtn,
  .MusicMapping-card-mediaWrapper:hover .MusicMapping-card-infoBtn {
    opacity: 1;
    visibility: visible;
  }

  // Audio cards: controls as hover extension
  .MusicMapping-card-controls {
    position: absolute;
    top: calc(100% - 8px);
    left: -1px;
    right: -1px;
    background: white;
    border: 1px solid lightgrey;
    border-top: none;
    border-radius: 0 0 8px 8px;
    padding: 0.5rem 0.8rem;
    z-index: 10;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.15s ease, visibility 0.15s ease;
  }

  .MusicMapping-card-content:hover .MusicMapping-card-controls {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  // ABC card: remove bottom corners on hover so controls connect seamlessly
  .MusicMapping-card--abc:has(.MusicMapping-card-content:hover) {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom-color: transparent;
  }

  .MusicMapping-card--abc .MusicMapping-card-controls {
    top: calc(100% - 14px);
    border-top: none;
  }

  // Video card: controls extend the card visually
  .MusicMapping-card--video .MediaPlayer-underPlayerContent {
    position: absolute;
    top: calc(100% - 8px);
    left: calc(-0.8rem - 1px);
    right: calc(-0.8rem - 1px);
    background: white;
    border: 1px solid lightgrey;
    border-top: none;
    border-radius: 0 0 8px 8px;
    padding: 0.8rem;
    z-index: 10;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.15s ease, visibility 0.15s ease;
  }

  .MusicMapping-card--video:has(.MusicMapping-card-content:hover) {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  .MusicMapping-card--video .MusicMapping-card-content:hover .MediaPlayer-underPlayerContent {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }
}

// Arrow hit area focus/active styles
.MusicMapping-arrowHitArea {
  outline: none;

  &:focus,
  &:active {
    outline: 2px solid #E57373;
  }
}
